<h2>Memory Game</h2>
<style>
.memory_box{
  background-color:orange;
  width: 200px;
  height: 200px;
  text-align: center;
  line-height: 200px;
  font-size: 50px;
}
</style>

<table>
  <tr>
    <td>
      <div class = "memory_box" id = "box_0"></div>
    </td>
    <td>
      <div class = "memory_box" id = "box_1"></div>
    </td>
    <td>
      <div class = "memory_box" id = "box_2"></div>
    </td>
    <td>
      <div class = "memory_box" id = "box_3"></div>
    </td>
  </tr>
  <tr>
    <td>
      <div class = "memory_box" id = "box_4"></div>
    </td>
    <td>
      <div class = "memory_box" id = "box_5"></div>
    </td>
    <td>
      <div class = "memory_box" id = "box_6"></div>
    </td>
    <td>
      <div class = "memory_box" id = "box_7"></div>
    </td>
  </tr>
</table>

<script src="jquery-3.7.1.min.js"></script>

<script>
card_obj = {
  card_letters: [
    "a", //box 0
    "b", //box 1
    "c", //box 2
    "d", //box 3
    "a", //box 4
    "b", //box 5
    "c", //box 6
    "d"  //box 7
  ],
  visible_letters: [],
  selected_boxes: [],
};

/*
  Function to shuffle the card_obj array so it will be different for different participants
*/
function shuffle(array) {
  let currentIndex = array.length;

  // While there remain elements to shuffle...
  while (currentIndex != 0) {

    // Pick a remaining element...
    let randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;

    // And swap it with the current element.
    [array[currentIndex], array[randomIndex]] = [
      array[randomIndex], array[currentIndex]];
  }
}

let arr = card_obj["card_letters"]
shuffle(arr);
console.log(arr);
</script>

<script>
$(".memory_box").on("click", function(){
  var this_index = this.id.replace("box_", "");
  var this_letter = card_obj.card_letters[this_index];
  $(this).html(this_letter)

  /*
    Add the box id to the list of selected selected_boxes
  */
  card_obj["selected_boxes"].push(this.id);

  /*
    Add the selected letter to the list of visible letters
  */
  card_obj["visible_letters"].push(this_letter);

  var cards_visible = card_obj["selected_boxes"].length;

  if(cards_visible == 2){
    var first_letter = card_obj["visible_letters"][0];
    var second_letter = card_obj["visible_letters"][1];
    if(first_letter == second_letter){
      //remove these matching cards/ boxes from the Game
      setTimeout(function(){
        var first_box = card_obj["selected_boxes"][0];
        var second_box = card_obj["selected_boxes"][1];
        $("#" + first_box).fadeOut();
        $("#" + second_box).fadeOut();
        // resets arrays to empty
        card_obj["selected_boxes"] = [];
        card_obj["visible_letters"] = [];
      }, 2000);
    } else {
      //what to do if the two letters don't match
      setTimeout(function(){
        //resets arrays to empty
        $(".memory_box").html("");
        card_obj["selected_boxes"] = [];
        card_obj["visible_letters"] = [];
      }, 2000);
    }
  }
});
</script>
